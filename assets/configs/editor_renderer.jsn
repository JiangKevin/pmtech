{
	include: [
		post_process.yaml
	],
	
	blend_states:
	{
		disabled:
		{
			blend_enable: false,	
		}
		
		additive:
		{
			blend_enable: true,
			src_blend: one,
			dest_blend: one
		}
		
		alpha_belnd:
		{
			blend_enable: true,
			src_blend: src_alpha,
			dest_blend: inv_src_alpha
		}
	},
	
	sampler_states:
	{
		wrap_linear:
		{
			filter: linear,
			address: wrap
		},
		
		clamp_linear:
		{
			filter: linear,
			address: clamp
		},
		
		clamp_point:
		{
			filter: point,
			address: clamp
		},
	},
	
	depth_stencil_states:
	{
		disabled:
		{
			depth_enable: false,
		},
		
		default:
		{
			depth_enable: true,
			depth_write: true,
			depth_func: "less"
		},
		
		depth_never:
		{
			depth_enable: true,
			depth_write: true,
			depth_func: "never"
		},
		
		depth_always:
		{
			depth_enable: true,
			depth_write: true,
			depth_func: "always"
		},
		
		depth_always_no_write:
		{
			depth_enable: true,
			depth_write: false,
			depth_func: "always"
		},
		
		stencil_test:
		{
			depth_enable: true,
			depth_write: true,
			depth_func: "always",
			stencil_enable: true,
			stencil_write_mask: 0xff,
			stencil_read_mask: 0xff,
			
			stencil_op:
			{
				stencil_fail: "keep",
				depth_fail: "keep",
				stencil_pass: "replace",
				stencil_func: "equal"
			}
		},
	},
	
	raster_states:
	{
		default:
		{
			cull_mode: back,
		},
		
		wireframe:
		{
			cull_mode: none,
			fill_mode: wireframe
		}
		
		front_face_cull:
		{
			cull_mode: front,
			fill_mode: solid
		},
		
		volume_raster:
		{
			cull_mode: back
		},
		
		post_process:
		{
			cull_mode: none
		}
	},
	
	render_targets:
	{
		picking:
		{
			size: equal,
			format: r32u,
			cpu_read: true
		},
		
		picking_ds:
		{
			size: equal,
			format: d24s8,
		},
				
		shadow_map:
		{
			size: [2048,2048],
			format: d24s8,
		},
		
		volume_raster:
		{
			size: [128,128],
			format: rgba8,
			cpu_read: true
		},
		
		volume_raster_ds:
		{
			size: [128,128],
			format: d24s8,
		},
		
		post_process_colour:
		{
			size: equal,
			samples: 4,
			format: rgba8
		},
		
		post_process_depth:
		{
			size: equal,
			samples: 4,
			format: d24s8
		},
		
		gbuffer_depth:
		{
			size: equal,
			samples: 4,
			format: d24s8
		},
		
		gbuffer_albedo:
		{
		    size: equal,
		    samples: 4,
		    format: rgba8
		},
		
		gbuffer_normals:
		{
		    size: equal,
		    samples: 4,
		    format: rgba32f
		},
		
		gbuffer_world_pos:
		{
		    size: equal,
		    samples: 4,
		    format: rgba32f
		}
	},
	
	view_test:
	{
	    post_process:
		{
		    target: [post_process_colour, post_process_depth],
		    colour_write_mask: 0xf,
		    blend_state: disabled,
			viewport: [0.0, 0.0, 1.0, 1.0],
			raster_state: default,
			depth_stencil_state: default,
			camera: model_viewer_camera,
		},
		
		gbuffer_view:
	    {
	    	target: [gbuffer_albedo, gbuffer_normals, gbuffer_world_pos, gbuffer_depth],
			clear_colour: [1.0, 1.0, 1.0, 1.0],			
			clear_depth: 1.0,
			clear:
			{
				gbuffer_albedo:
				{
					clear_colour_f:[0.0, 0.0, 0.0, 1.0]
				},
				
				gbuffer_normals:
				{
					clear_colour_f:[0.0, 0.0, 0.0, 1.0]
				},
				
				gbuffer_world_pos:
				{
					clear_colour_f:[0.0, 0.0, 0.0, 1.0]
				}
			},
			viewport: [0.0, 0.0, 1.0, 1.0],
			blend_state: disabled,
			raster_state: default,
			depth_stencil_state: default,
			pmfx_shader: forward_render,
			technique: gbuffer,
			scene: main_scene,
			camera: model_viewer_camera,
			scene_views: ["ces_render_scene"]
	    },
	     
		deferred_lights_view:
		{
		    target: [main_colour],
		    colour_write_mask: 0xf,
		    blend_state: disabled,
			viewport: [0.0, 0.0, 1.0, 1.0],
			raster_state: default,
			depth_stencil_state: default,
			shader: deferred_render,
			scene: main_scene,
			camera: model_viewer_camera,
			scene_views: ["ces_render_light_volumes"],
			
			sampler_bindings:
            [
                { texture: gbuffer_albedo, unit: 0, state: wrap_linear, shader: ps },
                { texture: gbuffer_normals, unit: 1, state: wrap_linear, shader: ps },
                { texture: gbuffer_world_pos, unit: 1, state: wrap_linear, shader: ps },
                { texture: gbuffer_depth, unit: 2, state: wrap_linear, shader: ps },
            ],
		},
	}
	
	views:
	{
		main_view:
		{
			target: [post_process_colour, post_process_depth],
			clear_colour: [0.5, 0.5, 0.5, 1.0],
			clear_depth: 1.0,
			colour_write_mask: 0xf,
			blend_state: disabled,
			viewport: [0.0, 0.0, 1.0, 1.0],
			raster_state: default,
			depth_stencil_state: default,
			scene: main_scene,
			camera: model_viewer_camera,
			scene_views: ["ces_render_scene"],
			render_flags: ["forward_lit"],
			post_process: editor_default,
			
			sampler_bindings:
			[
				{ texture: shadow_map, unit: 15, state: wrap_linear, shader: ps },
			],
		},
				
		editor_view:
		{
			target: [main_colour, main_depth],
			colour_write_mask: 0xf,
			blend_state: disabled,
			viewport: [0.0, 0.0, 1.0, 1.0],
			raster_state: wireframe,
			depth_stencil_state: default,
			pmfx_shader: forward_render,
			technique: constant_colour,
			scene: main_scene,
			camera: model_viewer_camera,
			scene_views: ["ces_render_editor"]
		},
		
		picking_view:
		{
			target: [picking, picking_ds],
			clear:
			{
				picking:
				{
					clear_colour_u:[10000, 10000, 10000, 10000]
				}
			},
			clear_depth: 1.0,
			viewport: [0.0, 0.0, 1.0, 1.0],
			blend_state: disabled,
			raster_state: default,
			depth_stencil_state: default,
			pmfx_shader: pmfx_utility,
			technique: picking,
			scene: main_scene,
			camera: model_viewer_camera,
			scene_views: ["ces_render_scene"]
		},
						
		volume_rasteriser:
		{
			target: [volume_raster, volume_raster_ds],
			clear_colour: [0.0, 0.0, 0.0, 0.0],
			clear_depth: 1.0,
			colour_write_mask: 0xf,
			blend_state: disabled,
			viewport: [0.0, 0.0, 1.0, 1.0],
			raster_state: volume_raster,
			depth_stencil_state: default,
			scene: main_scene,
			camera: volume_rasteriser_camera,
			pmfx_shader: pmfx_utility,
			technique: volume_raster_albedo,
			scene_views: ["ces_render_scene"],
			render_flags: ["forward_lit"],
			
			sampler_bindings:
			[
				{ texture: shadow_map, unit: 15, state: wrap_linear, shader: ps },
			],
		},
	},
	
	view_set: [ main_view, editor_view, picking_view, volume_rasteriser ]
}